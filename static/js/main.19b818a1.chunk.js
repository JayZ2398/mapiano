(this.webpackJsonpmapiano=this.webpackJsonpmapiano||[]).push([[0],{30:function(t,e,n){},31:function(t,e,n){},33:function(t,e,n){},35:function(t,e,n){},36:function(t,e,n){},46:function(t,e,n){},47:function(t,e,n){},48:function(t,e,n){"use strict";n.r(e);var r,i,a,o,u=n(6),c=n.n(u),s=n(18),l=n.n(s),h=(n(30),n(31),n(15)),m=n(9),f=n(11),d=n(10),p=n(4),y=(r=function(){function t(e){Object(m.a)(this,t),this.store=void 0,this.store=e}return Object(f.a)(t,[{key:"updateSymbol",value:function(t){var e=this;Object(p.p)((function(){return e.store.chordSymbol.set(t)}))}},{key:"updateName",value:function(t){var e=this;Object(p.p)((function(){return e.store.chordName.set(t)}))}}]),t}(),Object(d.a)(r.prototype,"updateSymbol",[p.f],Object.getOwnPropertyDescriptor(r.prototype,"updateSymbol"),r.prototype),Object(d.a)(r.prototype,"updateName",[p.f],Object.getOwnPropertyDescriptor(r.prototype,"updateName"),r.prototype),r),v=n(14),_=(n(21),i=function t(){Object(m.a)(this,t),Object(v.a)(this,"chordName",a,this),Object(v.a)(this,"chordSymbol",o,this)},a=Object(d.a)(i.prototype,"chordName",[p.o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return p.o.box("")}}),o=Object(d.a)(i.prototype,"chordSymbol",[p.o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return p.o.box("")}}),i),O=(n(33),n(7));function k(t){var e=t.chordName,n=t.chordSymbol,r=t.onChangeSymbol;return Object(O.jsx)("section",{className:"ChordControlsView",children:Object(O.jsxs)("form",{onSubmit:function(t){t.preventDefault()},children:[Object(O.jsxs)("p",{children:[Object(O.jsx)("label",{children:"Name: "}),e]}),Object(O.jsxs)("p",{children:[Object(O.jsx)("label",{children:"Chord: "}),Object(O.jsx)("input",{value:n,type:"text",name:"chordName",onChange:function(t){return r(t.currentTarget.value)}})]})]})})}n(35);var j,b,g,x,E=n(23),N=function(t){return t.includes("#")},S=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],w=S.map((function(t){return{note:t,isMarked:!1}})),T=(j=function(){function t(){Object(m.a)(this,t),Object(v.a)(this,"notes",b,this),Object(v.a)(this,"onClickCallBack",g,this)}return Object(f.a)(t,[{key:"markedIndexes",get:function(){return this.notes.map((function(t,e){return Object(E.a)(Object(E.a)({},t),{},{i:e})})).filter((function(t){return t.isMarked})).map((function(t){return t.i}))}}]),t}(),b=Object(d.a)(j.prototype,"notes",[p.o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Object(p.o)(w)}}),g=Object(d.a)(j.prototype,"onClickCallBack",[p.o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(){}}}),Object(d.a)(j.prototype,"markedIndexes",[p.g],Object.getOwnPropertyDescriptor(j.prototype,"markedIndexes"),j.prototype),j);function I(t,e,n){return t.map((function(t){return t===e?n:t}))}function A(t,e){return t.find((function(t){return t===e}))||(t.push(e),t.sort()),t}!function(t){t[t.UNISON=0]="UNISON",t[t.MINOR_SECOND=1]="MINOR_SECOND",t[t.MAJOR_SECOND=2]="MAJOR_SECOND",t[t.MINOR_THIRD=3]="MINOR_THIRD",t[t.MAJOR_THIRD=4]="MAJOR_THIRD",t[t.PERFECT_FOURTH=5]="PERFECT_FOURTH",t[t.TRITONE=6]="TRITONE",t[t.PERFECT_FIFTH=7]="PERFECT_FIFTH",t[t.MINOR_SIXTH=8]="MINOR_SIXTH",t[t.MAJOR_SIXTH=9]="MAJOR_SIXTH",t[t.DIMINISHED_SEVENTH=9]="DIMINISHED_SEVENTH",t[t.MINOR_SEVENTH=10]="MINOR_SEVENTH",t[t.MAJOR_SEVENTH=11]="MAJOR_SEVENTH",t[t.OCTAVE=12]="OCTAVE",t[t.MINOR_NINTH=13]="MINOR_NINTH",t[t.MAJOR_NINTH=14]="MAJOR_NINTH",t[t.MINOR_TENTH=15]="MINOR_TENTH",t[t.MAJOR_TENTH=16]="MAJOR_TENTH",t[t.PERFECT_ELEVENTH=17]="PERFECT_ELEVENTH",t[t.COMPOUND_TRITONE=18]="COMPOUND_TRITONE",t[t.PERFECT_TWELFTH=19]="PERFECT_TWELFTH",t[t.MINOR_THIRTEENTH=21]="MINOR_THIRTEENTH",t[t.MAJOR_THIRTEENTH=21]="MAJOR_THIRTEENTH"}(x||(x={}));var M=[x.UNISON,x.MAJOR_THIRD,x.PERFECT_FIFTH],R=function(t){return t},C=function(t){return I(t,x.MAJOR_THIRD,x.MINOR_THIRD)},F=function(t){return I(t,x.PERFECT_FIFTH,x.MINOR_SIXTH)},$=function(t){return I(t,x.PERFECT_FIFTH,x.TRITONE)},D=function(t){return function(t,e){return t.filter((function(t){return!e.includes(t)}))}(t,[x.MAJOR_THIRD,x.MINOR_THIRD])},H=function(t){return A(D(t),x.MAJOR_SECOND)},P=function(t){return A(D(t),x.PERFECT_FOURTH)},q=function(){function t(e,n){Object(m.a)(this,t),this.tone=void 0,this.modifier=void 0,this.tone=e,this.modifier=n}return Object(f.a)(t,[{key:"symbol",get:function(){return this.modifier?this.tone+this.modifier:this.tone}}]),t}(),J=function(){function t(e){Object(m.a)(this,t),this.quality=e}return Object(f.a)(t,[{key:"name",get:function(){return this.quality}},{key:"symbol",get:function(){switch(this.quality){case"Major":return"";case"Minor":return"m";case"Augmented":return"+";case"Diminished":return"o";case"Power":return"5";case"Suspended 2nd":return"sus2";case"Suspended 4th":return"sus4";default:throw Error("Unhandled quality case: ".concat(this.quality))}}},{key:"modifier",get:function(){switch(this.name){case"Major":return R;case"Minor":return C;case"Augmented":return F;case"Diminished":return $;case"Power":return D;case"Suspended 2nd":return H;case"Suspended 4th":return P;default:throw Error("Unhandled quality case: ".concat(this.quality))}}}]),t}(),V=function(){function t(e,n){Object(m.a)(this,t),this.root=e,this.quality=n,this._intervals=void 0}return Object(f.a)(t,[{key:"name",get:function(){var t=this.root,e=this.quality;return[t.symbol,e.name].join(" ")}},{key:"symbol",get:function(){var t=this.root,e=this.quality;return[t.symbol,e.symbol].join("")}},{key:"intervals",get:function(){if(!this._intervals){var t=M;[this.quality.modifier].forEach((function(e){return t=e(t)})),this._intervals=t}return this._intervals}}]),t}();var B=function(t){var e=new q("C"),n=t.map((function(t){return new V(e,new J(t))})),r={};return n.forEach((function(t){return r[t.intervals.toString()]={quality:t.quality.quality}})),r}(["Major","Minor","Augmented","Diminished","Power","Suspended 2nd","Suspended 4th"]);var U,K,L,z,X,G,W,Q,Y,Z,tt,et,nt,rt,it,at,ot,ut,ct,st,lt,ht,mt=n(25),ft=n(24),dt=n(8);!function(t){t.start="start",t.tone_1="tone_1",t.tone_2="tone_2",t.tone_3="tone_3",t.tone_4="tone_4",t.tone_5="tone_5",t.tone_6="tone_6",t.tone_7="tone_7",t.note="note",t.note_$0_1="note_$0_1",t.note_$0_2="note_$0_2",t.root="root",t.diminished="diminished",t.diminished_$0_1="diminished_$0_1",t.diminished_$0_2="diminished_$0_2",t.augmented="augmented",t.augmented_$0_1="augmented_$0_1",t.augmented_$0_2="augmented_$0_2",t.major="major",t.major_$0_1="major_$0_1",t.major_$0_2="major_$0_2",t.minor="minor",t.minor_$0_1="minor_$0_1",t.minor_$0_2="minor_$0_2",t.sus2="sus2",t.sus4="sus4",t.sus_1="sus_1",t.sus_2="sus_2",t.power="power",t.power_$0="power_$0",t.major2="major2",t.quality_1="quality_1",t.quality_2="quality_2",t.quality_3="quality_3",t.quality_4="quality_4",t.quality_5="quality_5",t.quality_6="quality_6",t.quality_7="quality_7",t.chord="chord",t.$EOF="$EOF"}(ht||(ht={}));var pt=function(){function t(e){Object(m.a)(this,t),this.input=void 0,this.pos=void 0,this.negating=!1,this.memoSafe=!0,this.pos={overallPos:0,line:1,offset:0},this.input=e}return Object(f.a)(t,[{key:"reset",value:function(t){this.pos=t}},{key:"finished",value:function(){return this.pos.overallPos===this.input.length}},{key:"clearMemos",value:function(){}},{key:"matchstart",value:function(t,e){return this.matchchord(t+1,e)}},{key:"matchtone",value:function(t,e){var n=this;return this.choice([function(){return n.matchtone_1(t+1,e)},function(){return n.matchtone_2(t+1,e)},function(){return n.matchtone_3(t+1,e)},function(){return n.matchtone_4(t+1,e)},function(){return n.matchtone_5(t+1,e)},function(){return n.matchtone_6(t+1,e)},function(){return n.matchtone_7(t+1,e)}])}},{key:"matchtone_1",value:function(t,e){return this.regexAccept(String.raw(U||(U=Object(dt.a)(["(?:C)"]))),t+1,e)}},{key:"matchtone_2",value:function(t,e){return this.regexAccept(String.raw(K||(K=Object(dt.a)(["(?:D)"]))),t+1,e)}},{key:"matchtone_3",value:function(t,e){return this.regexAccept(String.raw(L||(L=Object(dt.a)(["(?:E)"]))),t+1,e)}},{key:"matchtone_4",value:function(t,e){return this.regexAccept(String.raw(z||(z=Object(dt.a)(["(?:F)"]))),t+1,e)}},{key:"matchtone_5",value:function(t,e){return this.regexAccept(String.raw(X||(X=Object(dt.a)(["(?:G)"]))),t+1,e)}},{key:"matchtone_6",value:function(t,e){return this.regexAccept(String.raw(G||(G=Object(dt.a)(["(?:A)"]))),t+1,e)}},{key:"matchtone_7",value:function(t,e){return this.regexAccept(String.raw(W||(W=Object(dt.a)(["(?:B)"]))),t+1,e)}},{key:"matchnote",value:function(t,e){var n=this;return this.run(t,(function(){var r,i,a=null;return null!==(r=n.matchtone(t+1,e))&&(i=n.matchnote_$0(t+1,e),1)&&(a={kind:ht.note,tone:r,modifier:i}),a}))}},{key:"matchnote_$0",value:function(t,e){var n=this;return this.choice([function(){return n.matchnote_$0_1(t+1,e)},function(){return n.matchnote_$0_2(t+1,e)}])}},{key:"matchnote_$0_1",value:function(t,e){return this.regexAccept(String.raw(Q||(Q=Object(dt.a)(["(?:#)"]))),t+1,e)}},{key:"matchnote_$0_2",value:function(t,e){return this.regexAccept(String.raw(Y||(Y=Object(dt.a)(["(?:b)"]))),t+1,e)}},{key:"matchroot",value:function(t,e){return this.matchnote(t+1,e)}},{key:"matchdiminished",value:function(t,e){var n=this;return this.run(t,(function(){var r,i=null;return null!==(r=n.matchdiminished_$0(t+1,e))&&(i={kind:ht.diminished,diminished:r}),i}))}},{key:"matchdiminished_$0",value:function(t,e){var n=this;return this.choice([function(){return n.matchdiminished_$0_1(t+1,e)},function(){return n.matchdiminished_$0_2(t+1,e)}])}},{key:"matchdiminished_$0_1",value:function(t,e){return this.regexAccept(String.raw(Z||(Z=Object(dt.a)(["(?:o)"]))),t+1,e)}},{key:"matchdiminished_$0_2",value:function(t,e){return this.regexAccept(String.raw(tt||(tt=Object(dt.a)(["(?:dim)"]))),t+1,e)}},{key:"matchaugmented",value:function(t,e){var n=this;return this.run(t,(function(){var r,i=null;return null!==(r=n.matchaugmented_$0(t+1,e))&&(i={kind:ht.augmented,augmented:r}),i}))}},{key:"matchaugmented_$0",value:function(t,e){var n=this;return this.choice([function(){return n.matchaugmented_$0_1(t+1,e)},function(){return n.matchaugmented_$0_2(t+1,e)}])}},{key:"matchaugmented_$0_1",value:function(t,e){return this.regexAccept(String.raw(et||(et=Object(dt.a)(["(?:+)"],["(?:\\+)"]))),t+1,e)}},{key:"matchaugmented_$0_2",value:function(t,e){return this.regexAccept(String.raw(nt||(nt=Object(dt.a)(["(?:aug)"]))),t+1,e)}},{key:"matchmajor",value:function(t,e){var n=this;return this.run(t,(function(){var r,i=null;return null!==(r=n.matchmajor_$0(t+1,e))&&(i={kind:ht.major,major:r}),i}))}},{key:"matchmajor_$0",value:function(t,e){var n=this;return this.choice([function(){return n.matchmajor_$0_1(t+1,e)},function(){return n.matchmajor_$0_2(t+1,e)}])}},{key:"matchmajor_$0_1",value:function(t,e){return this.regexAccept(String.raw(rt||(rt=Object(dt.a)(["(?:maj)"]))),t+1,e)}},{key:"matchmajor_$0_2",value:function(t,e){return this.regexAccept(String.raw(it||(it=Object(dt.a)(["(?:M)"]))),t+1,e)}},{key:"matchminor",value:function(t,e){var n=this;return this.run(t,(function(){var r,i=null;return null!==(r=n.matchminor_$0(t+1,e))&&(i={kind:ht.minor,minor:r}),i}))}},{key:"matchminor_$0",value:function(t,e){var n=this;return this.choice([function(){return n.matchminor_$0_1(t+1,e)},function(){return n.matchminor_$0_2(t+1,e)}])}},{key:"matchminor_$0_1",value:function(t,e){return this.regexAccept(String.raw(at||(at=Object(dt.a)(["(?:min)"]))),t+1,e)}},{key:"matchminor_$0_2",value:function(t,e){return this.regexAccept(String.raw(ot||(ot=Object(dt.a)(["(?:m)"]))),t+1,e)}},{key:"matchsus2",value:function(t,e){var n=this;return this.run(t,(function(){var r,i=null;return null!==(r=n.regexAccept(String.raw(ut||(ut=Object(dt.a)(["(?:sus2)"]))),t+1,e))&&(i={kind:ht.sus2,sus2:r}),i}))}},{key:"matchsus4",value:function(t,e){var n=this;return this.run(t,(function(){var r,i=null;return null!==(r=n.regexAccept(String.raw(ct||(ct=Object(dt.a)(["(?:sus4)"]))),t+1,e))&&(i={kind:ht.sus4,sus4:r}),i}))}},{key:"matchsus",value:function(t,e){var n=this;return this.choice([function(){return n.matchsus_1(t+1,e)},function(){return n.matchsus_2(t+1,e)}])}},{key:"matchsus_1",value:function(t,e){return this.matchsus2(t+1,e)}},{key:"matchsus_2",value:function(t,e){return this.matchsus4(t+1,e)}},{key:"matchpower",value:function(t,e){var n=this;return this.run(t,(function(){var r,i=null;return null!==(r=n.matchpower_$0(t+1,e))&&(i={kind:ht.power,power:r}),i}))}},{key:"matchpower_$0",value:function(t,e){return this.regexAccept(String.raw(st||(st=Object(dt.a)(["(?:5)"]))),t+1,e)}},{key:"matchmajor2",value:function(t,e){var n=this;return this.run(t,(function(){var r,i=null;return null!==(r=n.regexAccept(String.raw(lt||(lt=Object(dt.a)(["(?:)"]))),t+1,e))&&(i={kind:ht.major2,major:r}),i}))}},{key:"matchquality",value:function(t,e){var n=this;return this.choice([function(){return n.matchquality_1(t+1,e)},function(){return n.matchquality_2(t+1,e)},function(){return n.matchquality_3(t+1,e)},function(){return n.matchquality_4(t+1,e)},function(){return n.matchquality_5(t+1,e)},function(){return n.matchquality_6(t+1,e)},function(){return n.matchquality_7(t+1,e)}])}},{key:"matchquality_1",value:function(t,e){return this.matchdiminished(t+1,e)}},{key:"matchquality_2",value:function(t,e){return this.matchaugmented(t+1,e)}},{key:"matchquality_3",value:function(t,e){return this.matchmajor(t+1,e)}},{key:"matchquality_4",value:function(t,e){return this.matchminor(t+1,e)}},{key:"matchquality_5",value:function(t,e){return this.matchsus(t+1,e)}},{key:"matchquality_6",value:function(t,e){return this.matchpower(t+1,e)}},{key:"matchquality_7",value:function(t,e){return this.matchmajor2(t+1,e)}},{key:"matchchord",value:function(t,e){var n=this;return this.run(t,(function(){var r,i,a=null;return null!==(r=n.matchroot(t+1,e))&&null!==(i=n.matchquality(t+1,e))&&null!==n.match$EOF(e)&&(a={kind:ht.chord,root:r,quality:i}),a}))}},{key:"test",value:function(){var t=this.mark(),e=null!==this.matchstart(0);return this.reset(t),e}},{key:"parse",value:function(){var t=this.mark(),e=this.matchstart(0);if(e)return{ast:e,errs:[]};this.reset(t);var n=new _t;this.clearMemos(),this.matchstart(0,n);var r=n.getErr();return{ast:e,errs:null!==r?[r]:[]}}},{key:"mark",value:function(){return this.pos}},{key:"loop",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.mark(),r=[];;){var i=t();if(null===i)break;r.push(i)}return e||r.length>0?r:(this.reset(n),null)}},{key:"run",value:function(t,e){var n=this.mark(),r=e();return null!==r?r:(this.reset(n),null)}},{key:"choice",value:function(t){var e,n=Object(ft.a)(t);try{for(n.s();!(e=n.n()).done;){var r=(0,e.value)();if(null!==r)return r}}catch(i){n.e(i)}finally{n.f()}return null}},{key:"regexAccept",value:function(t,e,n){var r=this;return this.run(e,(function(){var e=new RegExp(t,"y"),i=r.mark();e.lastIndex=i.overallPos;var a=r.tryConsume(e);return n&&n.record(i,a,{kind:"RegexMatch",literal:t.substring(3,t.length-1),negated:r.negating}),a}))}},{key:"tryConsume",value:function(t){var e=t.exec(this.input);if(e){for(var n=0,r=-1,i=0;i<e[0].length;++i)"\n"===e[0][i]&&(++n,r=i);return this.pos={overallPos:t.lastIndex,line:this.pos.line+n,offset:-1===r?this.pos.offset+e[0].length:e[0].length-r-1},e[0]}return null}},{key:"noConsume",value:function(t){var e=this.mark(),n=t();return this.reset(e),n}},{key:"negate",value:function(t){var e=this.mark(),n=this.negating;this.negating=!n;var r=t();return this.negating=n,this.reset(e),null===r||null}},{key:"memoise",value:function(t,e){var n=this.mark(),r=e.get(n.overallPos);if(this.memoSafe&&void 0!==r)return this.reset(r[1]),r[0];var i=t();return this.memoSafe&&e.set(n.overallPos,[i,this.mark()]),i}},{key:"match$EOF",value:function(t){var e=this.finished()?{kind:ht.$EOF}:null;return t&&t.record(this.mark(),e,{kind:"EOF",negated:this.negating}),e}}]),t}();var yt,vt=function(){function t(e,n){Object(m.a)(this,t),this.pos=void 0,this.expmatches=void 0,this.pos=e,this.expmatches=Object(mt.a)(n)}return Object(f.a)(t,[{key:"toString",value:function(){return"Syntax Error at line ".concat(this.pos.line,":").concat(this.pos.offset,". Expected one of ").concat(this.expmatches.map((function(t){return"EOF"===t.kind?" EOF":" ".concat(t.negated?"not ":"","'").concat(t.literal,"'")})))}}]),t}(),_t=function(){function t(){Object(m.a)(this,t),this.mxpos={overallPos:-1,line:-1,offset:-1},this.regexset=new Set,this.pmatches=[]}return Object(f.a)(t,[{key:"record",value:function(t,e,n){null===e!==n.negated&&(t.overallPos>this.mxpos.overallPos&&(this.mxpos=t,this.pmatches=[],this.regexset.clear()),this.mxpos.overallPos===t.overallPos&&("RegexMatch"===n.kind?(this.regexset.has(n.literal)||this.pmatches.push(n),this.regexset.add(n.literal)):this.pmatches.push(n)))}},{key:"getErr",value:function(){return-1!==this.mxpos.overallPos?new vt(this.mxpos,this.pmatches):null}}]),t}();function Ot(t){if(null===t)throw Error("Parsed chord is null.");var e=t.root,n=t.quality,r=new q(e.tone,e.modifier),i=new J(function(t){if(t.major||""===t.major)return"Major";if(t.minor)return"Minor";if(t.augmented)return"Augmented";if(t.diminished)return"Diminished";if(t.power)return"Power";if(t.sus2)return"Suspended 2nd";if(t.sus4)return"Suspended 4th";throw Error("Unhandled quality:"+JSON.stringify(t))}(n));return new V(r,i)}function kt(t){var e=new pt(t).parse().ast;if(e)return Ot(e)}var jt=(yt=function(){function t(e){Object(m.a)(this,t),this.store=e}return Object(f.a)(t,[{key:"onSymbolInput",value:function(){var t=this.chordFromSymbol,e=this.store,n=e.piano,r=e.display;t?(r.updateName(t.name),n.unmarkAll(),n.mark(t)):(r.updateName(""),n.unmarkAll())}},{key:"onPianoInput",value:function(){var e=this.store.piano.markedNotesIndexes();if(0!==e.length){e=t.markedIndexesShiftedDown(e);var n=t.indexesToIntervals(e),r=function(t,e){var n=B[e.toString()];if(n){var r=new q(t[0],N(t)?"#":void 0),i=new J(n.quality);return new V(r,i)}}(S[e[0]],n),i=this.store.display;r?(i.updateName(r.name),i.updateSymbol(r.symbol)):(i.updateName(""),i.updateSymbol(""))}}},{key:"chordFromSymbol",get:function(){return kt(this.store.display.store.chordSymbol.get())}}],[{key:"markedIndexesShiftedDown",value:function(t){var e=t.length>0?t.map((function(t){return Math.floor(t/12)})).reduce((function(t,e){return Math.min(t,e)})):0;return e>0?t.map((function(t){return t-12*e})):t}},{key:"indexesToIntervals",value:function(t){if(0===(null===t||void 0===t?void 0:t.length))return t;var e=t[0];return t.map((function(t){return t-e}))}}]),t}(),Object(d.a)(yt.prototype,"onSymbolInput",[p.f],Object.getOwnPropertyDescriptor(yt.prototype,"onSymbolInput"),yt.prototype),Object(d.a)(yt.prototype,"onPianoInput",[p.f],Object.getOwnPropertyDescriptor(yt.prototype,"onPianoInput"),yt.prototype),Object(d.a)(yt.prototype,"chordFromSymbol",[p.g],Object.getOwnPropertyDescriptor(yt.prototype,"chordFromSymbol"),yt.prototype),yt),bt=function t(e,n){Object(m.a)(this,t),this.piano=e,this.display=n},gt=n(3);n(36);function xt(t){var e=t.className,n=t.onClick,r=t.isMarked,i=t.note;return Object(O.jsx)("div",{className:"Key ".concat(r?"Marked":""," ").concat(e),onClick:n,note:i})}function Et(t){return Object(O.jsx)(xt,Object(gt.a)(Object(gt.a)({},t),{},{className:""}))}function Nt(t){return Object(O.jsx)(xt,Object(gt.a)({className:"BlackKey"},t))}function St(){return Object(O.jsx)("div",{className:"Ghost"})}var wt,Tt=n(2),It=n.n(Tt),At=n(5),Mt=n(0),Rt=n(1),Ct=n(16),Ft=n(22),$t={urls:{A0:"A0.mp3",C1:"C1.mp3","D#1":"Ds1.mp3","F#1":"Fs1.mp3",A1:"A1.mp3",C2:"C2.mp3","D#2":"Ds2.mp3","F#2":"Fs2.mp3",A2:"A2.mp3",C3:"C3.mp3","D#3":"Ds3.mp3","F#3":"Fs3.mp3",A3:"A3.mp3",C4:"C4.mp3","D#4":"Ds4.mp3","F#4":"Fs4.mp3",A4:"A4.mp3",C5:"C5.mp3","D#5":"Ds5.mp3","F#5":"Fs5.mp3",A5:"A5.mp3",C6:"C6.mp3","D#6":"Ds6.mp3","F#6":"Fs6.mp3",A6:"A6.mp3",C7:"C7.mp3","D#7":"Ds7.mp3","F#7":"Fs7.mp3",A7:"A7.mp3",C8:"C8.mp3"},release:1,baseUrl:"https://tonejs.github.io/audio/salamander/"},Dt=(wt=function(){function t(e){Object(Mt.a)(this,t),this.store=e,this.sampler=void 0,this.mark=this.mark.bind(this),this.sampler=new Ft.a($t).toDestination()}return Object(Rt.a)(t,[{key:"playSound",value:function(){var t=Object(At.a)(It.a.mark((function t(e){return It.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Ft.b();case 2:this.sampler.triggerAttackRelease(e,"0.3s");case 3:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"onClickSound",value:function(){var t=Object(At.a)(It.a.mark((function t(e){var n,r;return It.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=e.currentTarget.getAttribute("note"),r=e.currentTarget.className.includes("Marked"),n&&!r&&this.playSound(n);case 3:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"mark",value:function(t){var e=this;t.forEach((function(t){if(!e.isValidIndex(t))throw Error("The index ".concat(t," is invalid (not an integer between [0,11])."));Object(p.p)((function(){return e.store.notes[t].isMarked=!0}))}))}},{key:"isValidIndex",value:function(t){return 0<=t&&t<this.store.notes.length&&t%1===0}},{key:"logMarkedKeys",value:function(){this.store.notes.forEach((function(t){t.isMarked&&console.log("".concat(t.note," is marked!"))}))}},{key:"unmarkAll",value:function(){this.store.notes.forEach((function(t){return Object(p.p)((function(){return t.isMarked=!1}))}))}},{key:"toggleKey",value:function(t){Object(p.p)((function(){return t.isMarked=!t.isMarked}))}}]),t}(),Object(Ct.a)(wt.prototype,"unmarkAll",[p.f],Object.getOwnPropertyDescriptor(wt.prototype,"unmarkAll"),wt.prototype),Object(Ct.a)(wt.prototype,"toggleKey",[p.f],Object.getOwnPropertyDescriptor(wt.prototype,"toggleKey"),wt.prototype),wt);n(46);function Ht(t){var e=t.children;return Object(O.jsx)("div",{className:"WhiteKeys",children:e})}function Pt(t){var e=t.children;return Object(O.jsx)("div",{className:"BlackKeys",children:e})}function qt(t){var e=t.children;return Object(O.jsx)("div",{className:"OctaveView",children:e})}var Jt,Vt,Bt,Ut=(Jt=function(){function t(e){Object(Mt.a)(this,t),this.store=e,this.store=e}return Object(Rt.a)(t,[{key:"mark",value:function(e){var n=this.store.octaves,r=e.root,i=e.intervals.map((function(e){return e+t.noteIndex(r)}));i[0]<0&&(i=i.map((function(t){return t+12}))),i.every((function(t){return Math.floor(t/12)>0}))&&(i=i.map((function(t){return t-12}))),i.forEach((function(t){return Object(p.p)((function(){return n[Math.floor(t/12)].mark([t%12])}))}))}},{key:"unmarkAll",value:function(){var t=this;Object(p.p)((function(){return t.store.octaves.forEach((function(t){return t.unmarkAll()}))}))}},{key:"markedNotesIndexes",value:function(){return this.store.octaves.flatMap((function(t,e){return t.store.markedIndexes.map((function(t){return t+12*e}))}))}}],[{key:"noteIndex",value:function(t){var e=t.tone,n=t.modifier,r=n?"#"===n?1:-1:0;return S.findIndex((function(t){return t===e}))+r}}]),t}(),Object(Ct.a)(Jt.prototype,"mark",[p.f],Object.getOwnPropertyDescriptor(Jt.prototype,"mark"),Jt.prototype),Object(Ct.a)(Jt.prototype,"unmarkAll",[p.f],Object.getOwnPropertyDescriptor(Jt.prototype,"unmarkAll"),Jt.prototype),Jt),Kt=(Vt=function t(e){Object(m.a)(this,t),Object(v.a)(this,"octaves",Bt,this),this.octaves=Object(p.o)(e)},Bt=Object(d.a)(Vt.prototype,"octaves",[p.o],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Vt);n(47);function Lt(t){return Object(O.jsx)("section",Object(gt.a)({className:"PianoView"},t))}function zt(){var t=[3,4].map((function(t){return function(t){var e=new T,n=new Dt(e),r=e.notes;return{Octave:Object(h.a)((function(){return Object(O.jsxs)(qt,{children:[Object(O.jsx)(Pt,{children:[Object(O.jsx)(St,{},"B placeholder")].concat(r.filter((function(t,e){return N(t.note)||!N(r[(e+1)%12].note)})).map((function(r){return N(r.note)?Object(O.jsx)(Nt,{note:r.note+t.toString(),onClick:function(t){n.toggleKey(r),n.onClickSound(t),e.onClickCallBack()},isMarked:r.isMarked},r.note):Object(O.jsx)(St,{},r.note)})))}),Object(O.jsx)(Ht,{children:r.filter((function(t){return!N(t.note)})).map((function(r){return Object(O.jsx)(Et,{note:r.note+t.toString(),onClick:function(t){n.toggleKey(r),n.onClickSound(t),e.onClickCallBack()},isMarked:r.isMarked},r.note)}))})]})})),store:e,mark:n.mark,unmarkAll:n.unmarkAll}}(t)})),e=t.map((function(t){return{store:t.store,mark:t.mark,unmarkAll:t.unmarkAll}})),n=new Kt(e),r=new Ut(n);return{Piano:Object(h.a)((function(){return Object(O.jsx)(O.Fragment,{children:Object(O.jsx)(Lt,{children:t.map((function(t,e){var n=t.Octave;return Object(O.jsx)(n,{},e)}))})})})),store:n,mark:r.mark,unmarkAll:r.unmarkAll,markedNotesIndexes:r.markedNotesIndexes}}var Xt=function(){var t=new _,e=new y(t),n=zt(),r=n.Piano,i=n.store,a=n.mark,o=n.unmarkAll,u=n.markedNotesIndexes,c=new bt({store:i,mark:a,unmarkAll:o,markedNotesIndexes:u},{store:t,updateSymbol:e.updateSymbol,updateName:e.updateName}),s=new jt(c),l=function(t){e.updateSymbol(t),s.onSymbolInput()},m=Object(h.a)((function(){return Object(O.jsx)(k,{chordName:t.chordName.get(),chordSymbol:t.chordSymbol.get(),onChangeSymbol:l})})),f=function(){return s.onPianoInput()};return i.octaves.forEach((function(t){t.store.onClickCallBack=f})),Object(h.a)((function(){return Object(O.jsxs)("div",{className:"ChordFinderView",children:[Object(O.jsx)(m,{}),Object(O.jsx)(r,{})]})}))}();var Gt=function(){return Object(O.jsxs)("div",{className:"App",children:[Object(O.jsx)("h1",{children:"\ud83c\udfbc Mapiano \ud83c\udfb5"}),Object(O.jsx)(Xt,{})]})},Wt=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,49)).then((function(e){var n=e.getCLS,r=e.getFID,i=e.getFCP,a=e.getLCP,o=e.getTTFB;n(t),r(t),i(t),a(t),o(t)}))};l.a.render(Object(O.jsx)(c.a.StrictMode,{children:Object(O.jsx)(Gt,{})}),document.getElementById("root")),Wt()}},[[48,1,2]]]);
//# sourceMappingURL=main.19b818a1.chunk.js.map